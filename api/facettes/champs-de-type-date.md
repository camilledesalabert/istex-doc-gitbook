# Champs de type date

| Informations | |
|------------ | ------------- |
| Options |   - <span class="mandParam">x</span> : renvoie le nombre de résultats ayant une date pour le champ x compris **entre la date la plus ancienne et la plus récente**,<br>- <span class="mandParam">x[y-z]</span> : renvoie le nombre de résultats ayant une date pour le champ x compris **entre y et z**,<br>- <span class="mandParam">x[y-z:i]</span> : renvoie le nombre de résultats ayant une date pour le champ x entre l'année y et z, affiché **par intervalle de i années**,<br>- <span class="mandParam">x[perYear]</span> : **équivalent à [\*-\*:1]**, renvoie le nombre de résultats ayant une date pour le champ x, affiché **par année**.<br><br>Les valeurs **y et z** peuvent prendre comme valeur **\* (étoile)** pour désigner **les valeurs minimale et maximale**. |
| Détails | Les résultats sont affichés **du terme le plus présent vers le terme le plus rare**.<br><br><span class="mandParam">Attention, certains champs ne peuvent être interrogés, leur résultat étant jugé non pertinent<br> et trop conséquent pour être affiché : doi, title, abstract</span>|
| Format de réponse pour une facette x[y-z] | <pre><code class="application/json">{<br>  "aggregations": {<br>    "publicationDate": {<br>      "buckets": [<br>        {<br>          "key": "1836-1972",<br>          "from": -4228675200000,<br>          "fromAsString": "1836",<br>          "to": 63072000000,<br>          "toAsString": "1972",<br>          "docCount": 581<br>        }<br>      ]<br>    }<br>  }<br>}</code></pre> |
| Explications | - <span class="mandParam">buckets</span> : tableau contenant l'état de collection,<br>- <span class="mandParam">key</span> : correspond à "y - z" (string),<br>- <span class="mandParam">from</span> : correspond à y (timestamp en millisecondes),<br>- <span class="mandParam">fromAsString</span> : correspond à y (string),<br>- <span class="mandParam">to</span> : correspond à z (timestamp en millisecondes),<br>- <span class="mandParam">toAsString</span> : correspond à z (string),<br>- <span class="mandParam">docCount</span> : nombre de résultats trouvé dans cet intervalle. |
| Format de réponse pour une facette **x[y-z:i]**| <pre><code class="application/json">{<br>  "aggregations": {<br>    "copyrightDate": {<br>      "buckets": [<br>        {<br>          "keyAsString": "1832",<br>          "key": -4354905600000,<br>          "docCount": 50,<br>          "rangeAsString": "[1832-1833["<br>        },<br>        {<br>          "keyAsString": "1833",<br>          "key": -4323283200000,<br>          "docCount": 62,<br>          "rangeAsString": "[1833-1834["<br>        },<br>        ...<br>      }<br>    }<br>  }<br>}</code></pre> |
| Explications | <span class="mandParam">Attention, l'intervalle se doit d'être un <strong>entier (integer)</strong>, il n'est actuellement pas possible d'utiliser un <strong>float</strong>.<br>Il n'est pas possible également de continuer avec une facette imbriquée : les facettes suivantes seront supprimées.</span><br><br> Les résultats sont découpés selon l'intervalle choisi. <br>Prenons un exemple : un intervalle de 2 entre 2000 et 2004 créera 3 résultats :<br>- le nombre de documents entre **2000** et 2002 non inclu,<br>- le nombre de documents entre **2002** et 2004 non inclu, <br>- le nombre de documents en **2004**. <br>Mathématiquement, on aura : [2000-2004:2] = [**2000**-2002[ + [**2002**-2004[ + [**2004**-2004]<br>La facette affiche ces intervalles en indiquant **la borne inférieure** comme référence (key et keyAsString).<br><br>La facette affiche les dates **de la plus ancienne à la plus récente**.<br><br>- <span class="mandParam">buckets</span> : tableau contenant l'état de collection,<br>- <span class="mandParam">keyAsString</span> : année trouvée (année en string),<br>- <span class="mandParam">key</span> : année trouvée (timestamp en millisecondes),<br>- <span class="mandParam">docCount</span> : nombre de résultats trouvé pour cette année,<br>- <span class="mandParam">rangeAsString</span> : correspond à la notation mathématique de l'intervalle créé (string). |

| Exemples | |
| -------- | ------- |
| Affichage de l'ensemble des documents avec une facette sur **l'ensemble des dates de publication** | <a href="https://api.istex.fr/document/?q=*&facet=publicationDate">https://api.istex.fr/document/?q=*<span class="mandParam">&facet=publicationDate</a>|
| Affichage de l'ensemble des documents avec une facette sur les **dates de publication compris entre 1900 et 2000** | <a href="https://api.istex.fr/document/?q=*&facet=publicationDate[1900-2000]">https://api.istex.fr/document/?q=*<span class="mandParam">&facet=publicationDate[1900-2000]</a>|
| Affichage de l'ensemble des documents avec une facette sur **l'ensemble des dates de publication, découpé par année** | <a href="https://api.istex.fr/document/?q=*&facet=publicationDate[perYear]">https://api.istex.fr/document/?q=\*<span class="mandParam">&facet=publicationDate[perYear]</a><br><a href="https://api.istex.fr/document/?q=*&facet=[*-*:1]">https://api.istex.fr/document/?q=\*<span class="mandParam">&facet=publicationDate[\*-\*:1]</a><br><a href="https://api.istex.fr/document/?q=*&facet=publicationDateOverTime">https://api.istex.fr/document/?q=\*<span class="mandParam">&facet=publicationDateOverTime</a>|

